<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="RoadTrip - GPS trip recording with live HUD overlay">
    <meta name="theme-color" content="#000000">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>RoadTrip - Live Recording</title>
    <!-- MapLibre GL JS -->
    <link href="https://unpkg.com/maplibre-gl@^3/dist/maplibre-gl.css" rel="stylesheet">
    <script src="https://unpkg.com/maplibre-gl@^3/dist/maplibre-gl.js"></script>
    <link rel="stylesheet" href="./css/styles.css">
</head>

<body>
    <!-- Fullscreen Recording Page Container -->
    <div id="root">
        <!-- Background Layer (z-index: 0) -->
        <div id="backgroundLayer">
            <!-- Camera Feed (Dashcam Mode) -->
            <video id="cameraFeed" autoplay playsinline muted>
                <p>Camera not supported or not available</p>
            </video>

            <!-- Map Container (Tracking Mode) -->
            <div id="mapContainer">
                <div id="map">
                    <!-- MapLibre GL map will be initialized here -->
                </div>
                <canvas id="mapFallback" style="display: none;">
                    <!-- Fallback canvas for offline mode -->
                </canvas>
            </div>
        </div>

        <!-- HUD Overlay Canvas (z-index: 1) -->
        <canvas id="hudCanvas"></canvas>

        <!-- Controls Layer (z-index: 2) -->
        <div id="controlsLayer">
            <!-- Top Status Bar -->
            <div id="topBar">
                <div class="status-group">
                    <div id="recordingStatus" class="status-indicator">
                        <span class="status-dot"></span>
                        <span id="statusText">Ready</span>
                    </div>
                    <div id="modeIndicator" class="mode-badge">Camera</div>
                </div>
                <div class="stats-group">
                    <div id="gpsStatus" class="gps-indicator">
                        <span class="gps-icon">üìç</span>
                        <span id="gpsText">GPS</span>
                    </div>
                    <div id="storageIndicator" class="storage-info">
                        <span class="storage-icon">üíæ</span>
                        <span id="storageText">--</span>
                    </div>
                </div>
            </div>

            <!-- Bottom Control Bar -->
            <div id="bottomBar">
                <div class="control-group">
                    <!-- Mode Toggle -->
                    <button id="modeToggle" class="control-btn secondary">
                        <span class="btn-icon">üîÑ</span>
                        <span class="btn-label">Mode</span>
                    </button>

                    <!-- Fit Map (shown only in map mode) -->
                    <button id="fitBtn" class="control-btn secondary map-only">
                        <span class="btn-icon">üéØ</span>
                        <span class="btn-label">Fit</span>
                    </button>

                    <!-- Start/Stop Recording -->
                    <button id="recordBtn" class="control-btn primary">
                        <span class="btn-icon" id="recordIcon">‚ñ∂Ô∏è</span>
                        <span class="btn-label" id="recordLabel">Start</span>
                    </button>

                    <!-- Settings -->
                    <button id="settingsBtn" class="control-btn secondary">
                        <span class="btn-icon">‚öôÔ∏è</span>
                        <span class="btn-label">Settings</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Accessibility -->
    <div id="ariaLive" aria-live="polite" aria-atomic="true" class="sr-only"></div>

    <!-- Scripts -->
    <script type="module" src="./js/TripRecorder.js"></script>
    <script type="module" src="./js/LiveHUD.js"></script>
    <script type="module" src="./js/MapView.js"></script>
    <script type="module" src="./js/main.js"></script>
</body>

</html>