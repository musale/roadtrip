<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RoadTrip</title>
    <link rel="stylesheet" href="/src/css/styles.css">
  </head>
  <body class="bg-black text-white font-body overflow-hidden h-screen w-screen flex items-center justify-center">
    <div id="app" class="relative h-full w-full">
      <!-- Video Feed -->
      <video id="videoFeed" class="absolute inset-0 w-full h-full object-cover bg-black" autoplay playsinline muted></video>

      <!-- Overlay Container for all UI elements -->
      <div class="absolute inset-0 flex flex-col justify-between p-4 md:p-8">

        <!-- Top-Left: Live HUD (initially hidden) -->
        <div id="liveHud" class="hidden bg-black bg-opacity-50 p-3 rounded-lg shadow-lg max-w-xs text-brand font-heading text-sm md:text-base">
          <div class="flex justify-between">
            <span>SPEED:</span>
            <span id="hudSpeed">0.0 MPH</span>
          </div>
          <div class="flex justify-between">
            <span>DIST:</span>
            <span id="hudDistance">0.0 MI</span>
          </div>
          <div class="flex justify-between">
            <span>TIME:</span>
            <span id="hudTime">00:00:00</span>
          </div>
        </div>

        <!-- Center: Start/Stop Button -->
        <div class="flex-grow flex items-center justify-center">
          <button id="startStopButton" class="relative px-8 py-4 text-xl md:text-3xl font-heading text-brand bg-black bg-opacity-30 rounded-full shadow-neon transition-all duration-300 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-opacity-75">
            <span class="relative z-10">Start Trip</span>
            <span class="absolute inset-0 rounded-full animate-glowPulse"></span>
          </button>
        </div>

        <!-- Top-Right: Settings Button -->
        <div class="absolute top-4 right-4 md:top-8 md:right-8">
          <button id="settingsButton" class="bg-black bg-opacity-50 text-brand p-3 rounded-full shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-opacity-75">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 md:h-8 md:w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
            </svg>
          </button>
        </div>

        <!-- Settings Menu (initially hidden) -->
        <div id="settingsMenu" class="hidden absolute top-16 right-4 md:top-20 md:right-8 bg-black bg-opacity-70 p-4 rounded-lg shadow-xl text-brand font-body text-sm md:text-base z-20">
          <ul class="space-y-2">
            <li><button id="captureSettingsButton" class="block w-full text-left hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-opacity-75">Capture: <span id="currentCaptureSetting">Single</span></button></li>
            <li><button id="facingCameraButton" class="block w-full text-left hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-opacity-75">Facing: <span id="currentFacingSetting">Environment</span></button></li>
            <li><button id="recordingModeButton" class="block w-full text-left hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-opacity-75">Mode: <span id="currentRecordingModeSetting">Camera</span></button></li>
            <li><button id="speedUnitButton" class="block w-full text-left hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-opacity-75">Units: <span id="currentSpeedUnit">MPH</span></button></li>
            <li><button id="pastTripsButton" class="block w-full text-left hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-opacity-75">Past Trips</button></li>
          </ul>
        </div>

      </div>

      <!-- Generic Modal for settings (initially hidden) -->
      <div id="settingsModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
        <div class="bg-surface p-6 rounded-lg shadow-neon text-brand font-body w-11/12 md:w-1/3">
          <h2 id="settingsModalTitle" class="text-xl font-heading mb-4"></h2>
          <div id="settingsModalContent" class="space-y-3"></div>
          <button id="settingsModalClose" class="mt-6 w-full bg-brand text-black py-2 rounded-md font-heading focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-opacity-75">Close</button>
        </div>
      </div>

      <!-- Past Trips Overlay (initially hidden) -->
      <div id="pastTripsOverlay" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40">
        <div class="bg-surface p-6 rounded-lg shadow-neon text-brand font-body w-11/12 md:w-2/3 h-5/6 overflow-y-auto relative">
          <h2 class="text-xl font-heading mb-4">Past Trips</h2>
          <ul id="tripList" class="space-y-3"></ul>
          <button id="pastTripsClose" class="absolute top-4 right-4 bg-brand text-black p-2 rounded-full font-heading focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-opacity-75">X</button>
        </div>
      </div>

      <!-- Video Player Overlay (for replaying past trips) -->
      <div id="videoPlayerOverlay" class="hidden fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50">
        <div class="relative bg-surface p-4 rounded-lg shadow-neon">
          <button id="closeVideoPlayer" class="absolute top-2 right-2 text-brand text-xl font-bold">X</button>
          <video id="replayVideoPlayer" controls class="w-[80vw] h-[80vh] max-w-4xl max-h-2xl"></video>
        </div>
      </div>

    </div>
    <script type="module" src="/src/js/app.js"></script>
  </body>
</html>